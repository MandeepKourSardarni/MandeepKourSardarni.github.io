<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mandeep Kour – Portfolio</title>
  <meta name="description" content="Portfolio of Mandeep Kour – projects, experience, and contact." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b1220; --panel:#101a2c; --text:#e6edf6; --muted:#9fb0c5; --accent:#4cc9f0; --border:#20304b;
      --bg-light:#ffffff; --panel-light:#f7f9fc; --text-light:#111827; --muted-light:#475569; --border-light:#e5e7eb;
      --fade-s:0.6; /* crossfade duration in seconds */
    }
    html{scroll-behavior:smooth}

    /* Let the video show through */
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      line-height:1.6;
      background:transparent;
      color:var(--text)
    }
    [data-theme="light"] body{color:var(--text-light)}

    /* Double-buffered background video */
    .bg-video{
      position:fixed; inset:0; width:100%; height:100%;
      object-fit:cover; z-index:-2; pointer-events:none;
      opacity:0; transition:opacity var(--fade-s) linear;
      will-change: opacity;
      background:#000; /* hides flash before first frame */
    }
    .bg-video.active{ opacity:1; }

    .video-overlay{
      position:fixed; inset:0; z-index:-1; pointer-events:none;
      background:linear-gradient(180deg, rgba(8,12,20,.55), rgba(8,12,20,.55));
    }

    /* Respect reduced motion */
    @media (prefers-reduced-motion: reduce){
      .bg-video{ display:none; }
      .video-overlay{ display:none; }
      body{ background:var(--bg); }
      [data-theme="light"] body{ background:var(--bg-light); }
    }

    a{color:inherit;text-decoration:none}
    .container{max-width:1100px;margin:0 auto;padding:0 16px}

    .header{
      position:sticky;top:0;
      backdrop-filter:saturate(180%) blur(12px);
      background:rgba(16,26,44,.7);
      border-bottom:1px solid var(--border);
      z-index:50
    }
    [data-theme="light"] .header{background:rgba(255,255,255,.7);border-color:var(--border-light)}
    .nav{display:flex;justify-content:space-between;align-items:center;padding:14px 0}
    .nav a{margin:0 10px;font-size:14px;color:var(--muted)}
    [data-theme="light"] .nav a{color:var(--muted-light)}
    .brand{font-weight:800;letter-spacing:.2px}

    .btn{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--border);padding:10px 14px;border-radius:14px;background:rgba(16,26,44,.45);backdrop-filter:saturate(140%) blur(2px)}
    .btn.primary{background:var(--text);color:#0b1220;border-color:transparent}
    [data-theme="light"] .btn.primary{background:#111827;color:#fff}

    .hero{padding:60px 0}
    .grid{display:grid;gap:28px}
    @media(min-width:900px){.grid-2{grid-template-columns:1.2fr .8fr}}

    .card{border:1px solid var(--border);background:rgba(16,26,44,.65);border-radius:18px;padding:18px}
    [data-theme="light"] .card{background:rgba(247,249,252,.85);border-color:var(--border-light)}

    h1{font-size:44px;line-height:1.1;margin:6px 0 10px}
    h2{font-size:28px;margin:0 0 8px}
    h3{margin:0 0 6px}
    p{margin:8px 0;color:var(--muted)}
    [data-theme="light"] p{color:var(--muted-light)}
    .muted{color:var(--muted)}

    .chips{display:flex;flex-wrap:wrap;gap:8px}
    .chip{border:1px solid var(--border);padding:6px 10px;border-radius:999px;font-size:13px;background:rgba(16,26,44,.55)}

    .projects{display:grid;gap:18px}
    @media(min-width:900px){.projects{grid-template-columns:repeat(2,1fr)}}
    .proj img{width:100%;height:180px;object-fit:cover;border-radius:14px;border:1px solid var(--border)}

    footer{border-top:1px solid var(--border);margin-top:40px}
    .row{display:flex;gap:10px;flex-wrap:wrap}

    input,textarea{width:100%;padding:12px 14px;border-radius:12px;border:1px solid var(--border);background:transparent;color:inherit}
    textarea{min-height:120px}

    .hero-badge{font-size:12px;letter-spacing:.2em;text-transform:uppercase;color:var(--muted)}
    .hero-figure{aspect-ratio:1/1;border-radius:18px;overflow:hidden;border:1px solid var(--border)}
    .hero-figure img{width:100%;height:100%;object-fit:cover;display:block}

    .hide-sm{display:none}
    @media(min-width:640px){.hide-sm{display:flex}}
  </style>
</head>

<body>
  <!-- DOUBLE-BUFFERED BACKGROUND VIDEO (sources inline; autoplay-safe) -->
  <video id="bgA" class="bg-video active" autoplay muted playsinline preload="auto" crossorigin="anonymous" poster="/tech-poster.jpg">
    <source src="https://raw.githubusercontent.com/MandeepKourSardarni/MandeepKourSardarni.github.io/main/Tech.mp4" type="video/mp4">
    <source src="/Tech.mp4" type="video/mp4">
  </video>
  <video id="bgB" class="bg-video" autoplay muted playsinline preload="auto" crossorigin="anonymous" poster="/tech-poster.jpg">
    <source src="https://raw.githubusercontent.com/MandeepKourSardarni/MandeepKourSardarni.github.io/main/Tech.mp4" type="video/mp4">
    <source src="/Tech.mp4" type="video/mp4">
  </video>
  <div class="video-overlay"></div>

  <header class="header">
    <div class="container nav">
      <a class="brand" href="#home">Mandeep Kour</a>
      <nav class="hide-sm">
        <a href="#about">About</a>
        <a href="#skills">Skills</a>
        <a href="#projects">Projects</a>
        <a href="#experience">Experience</a>
        <a href="#contact">Contact</a>
      </nav>

      <div class="row" style="position:fixed; top:10px; right:16px; z-index:1000; gap:8px">
        <a class="btn" href="https://github.com/MandeepKourSardarni" target="_blank" rel="noreferrer" aria-label="GitHub" title="GitHub">GitHub</a>
        <a class="btn" href="https://www.linkedin.com/in/mandeep-kour-sardarni/" target="_blank" rel="noreferrer" aria-label="LinkedIn" title="LinkedIn">LinkedIn</a>
        <a class="btn" href="https://secure.plum.io/en/p/o9e7vYuoexHfRJGsinB_2w" target="_blank" rel="noreferrer" aria-label="Plum Profile" title="Plum Profile">Plum</a>
      </div>
    </div>
  </header>

  <main id="home" class="container">
    <section class="hero grid grid-2">
      <div>
        <div class="hero-badge">Hello, I'm</div>
        <h1>Mandeep Kour</h1>
        <p class="muted" style="margin:6px 0 14px; display:flex; flex-direction:column; gap:6px">
          <span style="display:inline-flex; align-items:center; gap:6px">Oakville, Ontario</span>
          <span style="display:inline-flex; align-items:center; gap:6px"><a href="mailto:mandeepkour0917@gmail.com">mandeepkour0917@gmail.com</a></span>
        </p>
        <p>Data/AI-focused professional building practical, fast, and useful solutions.</p>
        <div style="display:flex; flex-direction:column; gap:10px; margin-top:14px; max-width:260px">
          <a class="btn" href="https://github.com/MandeepKourSardarni" target="_blank" rel="noreferrer">GitHub</a>
          <a class="btn" href="https://www.linkedin.com/in/mandeep-kour-sardarni/" target="_blank" rel="noreferrer">LinkedIn</a>
          <a class="btn" href="#projects">Projects</a>
          <a class="btn" href="./Website_resume.pdf" download>Resume</a>
        </div>
      </div>

      <div class="hero-figure">
        <img src="https://MandeepKourSardarni.github.io/image.png" alt="Mandeep hero" loading="lazy" decoding="async" />
      </div>
    </section>

    <!-- (rest of your sections unchanged for brevity) -->
    <section id="about" class="grid" style="padding:20px 0">
      <h2>About</h2>
      <div class="card"><p>I’m a Data and AI–focused professional...</p></div>
    </section>
    <!-- Skills / Projects / Experience / Certifications / Education / Contact sections go here... -->
  </main>

  <footer>
    <div class="container" style="padding:18px 0;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px">
      <small class="muted">© <span id="year"></span> Mandeep</small>
      <div class="row">
        <a href="#home" class="muted">Top</a>
        <a href="#projects" class="muted">Projects</a>
        <a href="#contact" class="muted">Contact</a>
      </div>
    </div>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // ---------- Seamless crossfade controller ----------
    const FADE = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--fade-s')) || 0.6;
    const SAFETY = 0.15; // start a hair before end
    const vA = document.getElementById('bgA');
    const vB = document.getElementById('bgB');
    let active = vA, idle = vB, ticking = false;

    function safePlay(v){ const p = v.play(); if (p && p.catch) p.catch(()=>{}); }

    function ensureReady(v, cb){
      if (v.readyState >= 1) cb(); // HAVE_METADATA
      else v.addEventListener('loadedmetadata', cb, { once:true });
    }

    function primeIdle(){
      try { idle.currentTime = 0.001; } catch(_) {}
      safePlay(idle); idle.pause();   // warm decode first frames
      idle.classList.remove('active');
    }

    function swap(){
      try { idle.currentTime = 0.001; } catch(_) {}
      // ORDER MATTERS: show new first, then hide old (never both hidden)
      safePlay(idle);
      idle.classList.add('active');       // fade in
      active.classList.remove('active');  // fade out

      const prev = active; active = idle; idle = prev;
      setTimeout(()=>{ idle.pause(); }, FADE*1000 + 40);
    }

    function tick(){
      if (!active || !isFinite(active.duration) || active.duration === 0){
        requestAnimationFrame(tick);
        return;
      }
      const early = Math.max(0.3, FADE + SAFETY); // cap minimum margin
      if (active.currentTime >= active.duration - early){
        swap();
        setTimeout(primeIdle, 200);
      }
      requestAnimationFrame(tick);
    }

    // Start once first video is ready
    ensureReady(vA, () => {
      safePlay(vA);
      vA.classList.add('active');
      ensureReady(vB, primeIdle);
      if (!ticking){ ticking = true; requestAnimationFrame(tick); }
    });

    // Absolute fallback: user gesture to force play if a browser blocks autoplay
    const kick = () => { safePlay(vA); safePlay(vB); document.removeEventListener('pointerdown', kick); };
    document.addEventListener('pointerdown', kick, { once:true });

    // Safety: if something ends (no loop attr), we still swap
    [vA, vB].forEach(v => v.addEventListener('ended', () => { if (v===active) swap(); }));
  </script>
</body>
</html>
